<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المحاكي المتكامل لنظام الطاقة الشمسية 2025 | م/مطيع داؤود المحجري</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0a3d62;
            --secondary: #1e5799;
            --accent: #ffd700;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --copper: #b87333;
            --lithium: #8a9a5b;
            --gel: #4682b4;
            --agm: #6a5acd;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary), #3a86ff);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            background-attachment: fixed;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            color: white;
            animation: fadeIn 1s ease-in-out;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1566378246598-5b11a0d486cc?auto=format&fit=crop&w=1200') center/cover;
            opacity: 0.3;
            z-index: -1;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .logo i {
            font-size: 3rem;
            margin-left: 15px;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .year-badge {
            background: var(--accent);
            color: var(--primary);
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.2rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .developer {
            background: rgba(255, 255, 255, 0.2);
            display: inline-block;
            padding: 10px 25px;
            border-radius: 30px;
            margin-top: 15px;
            font-weight: bold;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 1.1rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tab {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            flex: 1;
            text-align: center;
            min-width: 150px;
        }

        .tab:hover, .tab.active {
            background: var(--accent);
            color: var(--primary);
            transform: translateY(-3px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent);
            color: var(--primary);
            font-size: 1.4rem;
        }

        .section-title i {
            margin-left: 10px;
            font-size: 1.6rem;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
            font-size: 1.05rem;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }

        input:focus, select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }

        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-top: 10px;
            box-shadow: 0 4px 10px rgba(10, 61, 98, 0.3);
        }

        .btn:hover {
            background: linear-gradient(to right, #093354, #1a4b85);
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
            width: auto;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .result-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--accent);
            transition: transform 0.3s ease;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
        }

        .result-card:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .result-label {
            font-size: 1rem;
            color: #495057;
            font-weight: 500;
        }

        footer {
            text-align: center;
            color: white;
            padding: 25px 0;
            margin-top: 40px;
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .yemen-flag {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .flag-strip {
            height: 25px;
            width: 200px;
        }

        .red { background-color: #ce1126; }
        .white { background-color: #ffffff; }
        .black { background-color: #000000; }

        .contact-info {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .contact-info h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .contact-info p {
            margin: 10px 0;
            font-size: 1.05rem;
            direction: ltr;
        }

        .contact-info i {
            margin-left: 10px;
            color: var(--secondary);
            min-width: 25px;
        }

        .contact-row {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .appliance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .appliance-table th {
            background-color: var(--primary);
            color: white;
            padding: 15px;
            text-align: center;
        }

        .appliance-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }

        .appliance-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .appliance-table tr:hover {
            background-color: #f1f7ff;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            background: var(--success);
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger);
        }

        .system-summary {
            background: linear-gradient(135deg, #1e5799, #3a86ff);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .summary-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .summary-title i {
            margin-left: 10px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .summary-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .summary-label {
            font-size: 1rem;
            font-weight: 500;
            opacity: 0.9;
        }

        .cost-table {
            width: 100%;
            margin-top: 30px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .cost-table th {
            background-color: var(--primary);
            color: white;
            padding: 15px;
            text-align: center;
        }

        .cost-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }

        .cost-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .cost-table tr:last-child td {
            border-bottom: none;
            font-weight: bold;
            background-color: #f1f7ff;
        }

        .cost-table tr:hover {
            background-color: #f1f7ff;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .tab {
                margin: 5px 0;
                width: 100%;
            }
            
            .results-grid, .summary-grid {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-solar-panel"></i>
                <h1>المحاكي المتكامل لنظام الطاقة الشمسية 2025</h1>
            </div>
            <div class="year-badge">نسخة 2025</div>
            <p>حساب دقيق لجميع مكونات النظام الشمسي وفق آخر تحديثات 2025</p>
            <div class="developer">
                <i class="fas fa-code"></i> المطور: م/مطيع داؤود محمد قاسم المحجري
            </div>
        </header>
        
        <div class="yemen-flag">
            <div class="flag-strip red"></div>
            <div class="flag-strip white"></div>
            <div class="flag-strip black"></div>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="consumption">حساب الاستهلاك</div>
            <div class="tab" data-tab="panels">حساب الألواح</div>
            <div class="tab" data-tab="batteries">حساب البطاريات</div>
            <div class="tab" data-tab="inverter">حساب العاكس</div>
            <div class="tab" data-tab="wires">حساب السلك</div>
            <div class="tab" data-tab="summary">ملخص النظام</div>
        </div>
        
        <div class="main-content">
            <!-- حساب الاستهلاك والتكلفة -->
            <div class="tab-content active" id="consumption">
                <h2 class="section-title"><i class="fas fa-calculator"></i> حساب استهلاك الطاقة وتكلفتها</h2>
                
                <div class="form-group">
                    <label for="appliance">اختر الأجهزة الكهربائية:</label>
                    <select id="appliance">
                        <option value="">-- اختر جهازًا --</option>
                        <option value="fridge">ثلاجة (150 واط)</option>
                        <option value="tv">تلفزيون (100 واط)</option>
                        <option value="ac">مكيف هواء (1500 واط)</option>
                        <option value="fan">مروحة (75 واط)</option>
                        <option value="light">إضاءة LED (10 واط)</option>
                        <option value="pc">كمبيوتر (300 واط)</option>
                        <option value="washer">غسالة (500 واط)</option>
                        <option value="router">راوتر (15 واط)</option>
                        <option value="water_pump">طلمبة مياه (750 واط)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="wattage">القدرة الكهربائية (واط):</label>
                    <input type="number" id="wattage" placeholder="أدخل قدرة الجهاز بالواط">
                </div>
                
                <div class="form-group">
                    <label for="usageHours">عدد ساعات التشغيل اليومية:</label>
                    <input type="number" id="usageHours" min="0" max="24" value="8">
                </div>
                
                <div class="form-group">
                    <label for="kwhCost">سعر الكيلوواط ساعة (ريال يمني):</label>
                    <input type="number" id="kwhCost" min="1" value="80">
                </div>
                
                <button id="addAppliance" class="btn">
                    <i class="fas fa-plus-circle"></i> إضافة جهاز
                </button>
                
                <div class="form-group" style="margin-top: 30px;">
                    <h3><i class="fas fa-list"></i> الأجهزة المضافة</h3>
                    <div id="appliancesList" style="margin-top: 15px;"></div>
                </div>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-value" id="hourlyConsumption">0 واط/ساعة</div>
                        <div class="result-label">الاستهلاك بالساعة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="dailyConsumption">0 ك.و.س</div>
                        <div class="result-label">الاستهلاك اليومي</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="monthlyConsumption">0 ك.و.س</div>
                        <div class="result-label">الاستهلاك الشهري</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="yearlyConsumption">0 ك.و.س</div>
                        <div class="result-label">الاستهلاك السنوي</div>
                    </div>
                </div>
            </div>
            
            <!-- حساب الألواح الشمسية -->
            <div class="tab-content" id="panels">
                <h2 class="section-title"><i class="fas fa-solar-panel"></i> حساب الألواح الشمسية</h2>
                
                <div class="form-group">
                    <label for="dailyConsumptionInput">الاستهلاك اليومي (ك.و.س):</label>
                    <input type="number" id="dailyConsumptionInput" placeholder="أدخل الاستهلاك اليومي">
                </div>
                
                <div class="form-group">
                    <label for="sunHours">متوسط ساعات سطوع الشمس (ساعات/يوم):</label>
                    <input type="number" id="sunHours" min="1" max="12" value="6">
                </div>
                
                <div class="form-group">
                    <label for="panelPower">قوة اللوح الشمسي (واط):</label>
                    <input type="number" id="panelPower" min="100" max="1000" value="400">
                </div>
                
                <div class="form-group">
                    <label for="panelPrice">سعر اللوح الواحد (ريال):</label>
                    <input type="number" id="panelPrice" min="100" max="5000" value="400">
                </div>
                
                <div class="form-group">
                    <label for="panelEfficiency">كفاءة الألواح الشمسية (%):</label>
                    <input type="number" id="panelEfficiency" min="1" max="100" value="20">
                </div>
                
                <button id="calculatePanels" class="btn">
                    <i class="fas fa-calculator"></i> احتساب الألواح المطلوبة
                </button>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-value" id="requiredPower">0 ك.و</div>
                        <div class="result-label">الطاقة الشمسية المطلوبة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="requiredPanels">0</div>
                        <div class="result-label">عدد الألواح المطلوبة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="panelArea">0 م²</div>
                        <div class="result-label">المساحة المطلوبة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="panelCost">0 ريال</div>
                        <div class="result-label">التكلفة التقريبية</div>
                    </div>
                </div>
            </div>
            
            <!-- حساب البطاريات -->
            <div class="tab-content" id="batteries">
                <h2 class="section-title"><i class="fas fa-car-battery"></i> حساب البطاريات</h2>
                
                <div class="form-group">
                    <label for="operatingHours">عدد ساعات التشغيل اليومية:</label>
                    <input type="number" id="operatingHours" min="1" max="24" value="8">
                </div>
                
                <div class="form-group">
                    <label for="hourlyConsumptionBattery">الاستهلاك الفعلي بالساعة (واط/ساعة):</label>
                    <input type="number" id="hourlyConsumptionBattery" placeholder="أدخل الاستهلاك بالساعة">
                </div>
                
                <div class="form-group">
                    <label for="dischargeRate">نسبة التفريغ (%):</label>
                    <input type="number" id="dischargeRate" min="1" max="100" value="50">
                </div>
                
                <div class="form-group">
                    <label for="batteryType">نوع البطارية:</label>
                    <select id="batteryType">
                        <option value="lead-acid">بطارية الرصاص الحمضية</option>
                        <option value="lithium">بطارية الليثيوم (Li-ion)</option>
                        <option value="lifepo4">بطارية ليثيوم فوسفات (LiFePO4)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="batteryVoltage">جهد البطارية (فولت):</label>
                    <select id="batteryVoltage">
                        <option value="12">12V</option>
                        <option value="24">24V</option>
                        <option value="48" selected>48V</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="batteryCapacity">سعة البطارية (أمبير.ساعة):</label>
                    <input type="number" id="batteryCapacity" min="10" max="1000" value="200">
                </div>
                
                <div class="form-group">
                    <label for="batteryPrice">سعر البطارية الواحدة (ريال):</label>
                    <input type="number" id="batteryPrice" min="100" max="50000" value="1500">
                </div>
                
                <button id="calculateBatteries" class="btn">
                    <i class="fas fa-calculator"></i> احتساب البطاريات المطلوبة
                </button>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-value" id="requiredBatteries">0</div>
                        <div class="result-label">عدد البطاريات المطلوبة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="requiredCapacity">0 أمبير.ساعة</div>
                        <div class="result-label">السعة المطلوبة</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="batteryCost">0 ريال</div>
                        <div class="result-label">التكلفة التقريبية</div>
                    </div>
                </div>
            </div>
            
            <!-- حساب العاكس -->
            <div class="tab-content" id="inverter">
                <h2 class="section-title"><i class="fas fa-bolt"></i> حساب العاكس</h2>
                
                <div class="form-group">
                    <label for="totalPower">إجمالي استهلاك الأجهزة (واط):</label>
                    <input type="number" id="totalPower" placeholder="أدخل إجمالي الاستهلاك">
                </div>
                
                <div class="form-group">
                    <label for="maxAppliancePower">أعلى استهلاك للجهاز (واط):</label>
                    <input type="number" id="maxAppliancePower" placeholder="أدخل أعلى استهلاك">
                </div>
                
                <div class="form-group">
                    <label for="inverterType">نوع العاكس:</label>
                    <select id="inverterType">
                        <option value="modified">موجة معدلة (Modified Sine Wave)</option>
                        <option value="pure">موجة نقية (Pure Sine Wave)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="inverterPrice">السعر التقريبي للعاكس (ريال):</label>
                    <input type="number" id="inverterPrice" min="100" max="50000" value="2500">
                </div>
                
                <button id="calculateInverter" class="btn">
                    <i class="fas fa-calculator"></i> احتساب مواصفات العاكس
                </button>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-value" id="inverterSize">0 واط</div>
                        <div class="result-label">حجم العاكس المطلوب</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="inverterCost">0 ريال</div>
                        <div class="result-label">التكلفة التقريبية</div>
                    </div>
                </div>
            </div>
            
            <!-- حساب السلك -->
            <div class="tab-content" id="wires">
                <h2 class="section-title"><i class="fas fa-bolt"></i> حساب السلك الكهربائي</h2>
                
                <div class="form-group">
                    <label for="current">التيار الكهربائي (أمبير):</label>
                    <input type="number" id="current" placeholder="أدخل شدة التيار">
                </div>
                
                <div class="form-group">
                    <label for="distance">المسافة (متر):</label>
                    <input type="number" id="distance" placeholder="أدخل المسافة">
                </div>
                
                <div class="form-group">
                    <label for="voltage">جهد النظام (فولت):</label>
                    <input type="number" id="voltage" value="48">
                </div>
                
                <div class="form-group">
                    <label for="voltageDrop">الحد الأقصى لهبوط الجهد (%):</label>
                    <input type="number" id="voltageDrop" min="1" max="10" value="3">
                </div>
                
                <div class="form-group">
                    <label for="wireType">نوع السلك:</label>
                    <select id="wireType">
                        <option value="copper">نحاس</option>
                        <option value="aluminum">ألومنيوم</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="wirePrice">سعر المتر للسلك (ريال):</label>
                    <input type="number" id="wirePrice" min="10" max="1000" value="50">
                </div>
                
                <button id="calculateWire" class="btn">
                    <i class="fas fa-calculator"></i> احتساب مقاس السلك
                </button>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-value" id="wireSize">0 مم²</div>
                        <div class="result-label">مقاس السلك المطلوب</div>
                    </div>
                    <div class="result-card">
                        <div class="result-value" id="wireCost">0 ريال</div>
                        <div class="result-label">التكلفة التقريبية</div>
                    </div>
                </div>
            </div>
            
            <!-- ملخص النظام -->
            <div class="tab-content" id="summary">
                <h2 class="section-title"><i class="fas fa-chart-bar"></i> ملخص النظام الشمسي</h2>
                
                <div class="system-summary">
                    <div class="summary-title">
                        <i class="fas fa-solar-panel"></i>
                        <h3>المواصفات الفنية والتكلفة الإجمالية</h3>
                    </div>
                    
                    <div class="summary-grid">
                        <div class="summary-card">
                            <div class="summary-value" id="sPanels">0</div>
                            <div class="summary-label">عدد الألواح الشمسية</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sBatteries">0</div>
                            <div class="summary-label">عدد البطاريات</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sInverter">0 واط</div>
                            <div class="summary-label">قوة العاكس</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sArea">0 م²</div>
                            <div class="summary-label">المساحة المطلوبة</div>
                        </div>
                    </div>
                    
                    <div class="summary-grid" style="margin-top: 25px;">
                        <div class="summary-card">
                            <div class="summary-value" id="sPanelCost">0 ريال</div>
                            <div class="summary-label">تكلفة الألواح</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sBatteryCost">0 ريال</div>
                            <div class="summary-label">تكلفة البطاريات</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sInverterCost">0 ريال</div>
                            <div class="summary-label">تكلفة العاكس</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="sWireCost">0 ريال</div>
                            <div class="summary-label">تكلفة الأسلاك</div>
                        </div>
                    </div>
                    
                    <div class="summary-card" style="margin-top: 20px; background: rgba(255,255,255,0.25);">
                        <div class="summary-value" id="sTotalCost">0 ريال</div>
                        <div class="summary-label">التكلفة الإجمالية</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 class="section-title"><i class="fas fa-money-bill-wave"></i> تكلفة الاستهلاك الكهربائي</h3>
                    
                    <table class="cost-table">
                        <thead>
                            <tr>
                                <th>الفترة</th>
                                <th>الاستهلاك (ك.و.س)</th>
                                <th>التكلفة (ريال يمني)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>يوميًا</td>
                                <td id="dailyConsumptionSummary">0</td>
                                <td id="dailyCost">0</td>
                            </tr>
                            <tr>
                                <td>شهريًا</td>
                                <td id="monthlyConsumptionSummary">0</td>
                                <td id="monthlyCost">0</td>
                            </tr>
                            <tr>
                                <td>سنويًا</td>
                                <td id="yearlyConsumptionSummary">0</td>
                                <td id="yearlyCost">0</td>
                            </tr>
                            <tr>
                                <td colspan="2">التوفير السنوي المتوقع</td>
                                <td id="yearlySavings">0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <button id="printSummary" class="btn" style="margin-top: 20px;">
                    <i class="fas fa-print"></i> طباعة الملخص
                </button>
            </div>
        </div>
        
        <div class="contact-info">
            <h3><i class="fas fa-headset"></i> معلومات التواصل مع المطور</h3>
            
            <div class="contact-row">
                <i class="fas fa-user"></i>
                <p>مطيع داؤود محمد قاسم المحجري</p>
            </div>
            
            <div class="contact-row">
                <i class="fas fa-phone"></i>
                <p>779775684</p>
            </div>
            
            <div class="contact-row">
                <i class="fas fa-envelope"></i>
                <p>mote7755mote@gmail.com</p>
            </div>
            
            <div class="contact-row">
                <i class="fas fa-map-marker-alt"></i>
                <p>مأرب - اليمن</p>
            </div>
        </div>
        
        <footer>
            <p>المحاكي المتكامل لنظام الطاقة الشمسية 2025 &copy; | تم التطوير بواسطة م/مطيع داؤود محمد قاسم المحجري</p>
            <p>جميع الحقوق محفوظة | هذا المشروع مقدم لخدمة الشعب اليمني</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                    
                    if(tabId === 'summary') {
                        updateSystemSummary();
                    }
                });
            });
            
            // Appliance list
            const appliances = [];
            const appliancesList = document.getElementById('appliancesList');
            
            // Show notification function
            function showNotification(message, isError = false) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = 'notification';
                notification.classList.add(isError ? 'error' : 'show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Event delegation for delete buttons
            appliancesList.addEventListener('click', function(e) {
                if (e.target.closest('.delete-btn')) {
                    const button = e.target.closest('.delete-btn');
                    const index = parseInt(button.dataset.index);
                    removeAppliance(index);
                }
            });
            
            document.getElementById('addAppliance').addEventListener('click', function() {
                const applianceSelect = document.getElementById('appliance');
                const wattageInput = document.getElementById('wattage');
                const usageHours = document.getElementById('usageHours');
                
                const applianceName = applianceSelect.options[applianceSelect.selectedIndex].text;
                let wattage = wattageInput.value;
                
                if (applianceSelect.value && !wattage) {
                    const matches = applianceName.match(/\((\d+)/);
                    if (matches) wattage = matches[1];
                }
                
                if (!wattage || !usageHours.value) {
                    showNotification('الرجاء إدخال قدرة الجهاز وعدد ساعات التشغيل', true);
                    return;
                }
                
                appliances.push({
                    name: applianceName.split('(')[0].trim(),
                    wattage: parseFloat(wattage),
                    hours: parseFloat(usageHours.value)
                });
                
                updateAppliancesList();
                calculateConsumption();
                updateSystemSummary();
                
                showNotification('تمت إضافة الجهاز بنجاح');
            });
            
            function updateAppliancesList() {
                appliancesList.innerHTML = '';
                
                if (appliances.length === 0) {
                    appliancesList.innerHTML = '<p>لم يتم إضافة أي أجهزة بعد</p>';
                    return;
                }
                
                const table = document.createElement('table');
                table.className = 'appliance-table';
                
                let tableContent = `
                    <thead>
                        <tr>
                            <th>الجهاز</th>
                            <th>القدرة (واط)</th>
                            <th>الساعات</th>
                            <th>الاستهلاك اليومي (ك.و.س)</th>
                            <th>إجراءات</th>
                        </tr>
                    </thead>
                    <tbody>
                `;
                
                appliances.forEach((appliance, index) => {
                    const dailyConsumption = (appliance.wattage * appliance.hours / 1000).toFixed(2);
                    tableContent += `
                        <tr>
                            <td>${appliance.name}</td>
                            <td>${appliance.wattage} واط</td>
                            <td>${appliance.hours} ساعة</td>
                            <td>${dailyConsumption} ك.و.س</td>
                            <td>
                                <button class="btn btn-sm delete-btn" data-index="${index}">
                                    <i class="fas fa-trash"></i> حذف
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                tableContent += '</tbody>';
                table.innerHTML = tableContent;
                appliancesList.appendChild(table);
            }
            
            function removeAppliance(index) {
                if (index >= 0 && index < appliances.length) {
                    const applianceName = appliances[index].name;
                    appliances.splice(index, 1);
                    updateAppliancesList();
                    calculateConsumption();
                    updateSystemSummary();
                    showNotification(`تم حذف الجهاز "${applianceName}"`);
                }
            }
            
            function calculateConsumption() {
                let totalHourly = 0;
                let totalDaily = 0;
                
                appliances.forEach(appliance => {
                    totalHourly += appliance.wattage;
                    totalDaily += appliance.wattage * appliance.hours / 1000;
                });
                
                document.getElementById('hourlyConsumption').textContent = totalHourly.toFixed(0) + ' واط/ساعة';
                document.getElementById('dailyConsumption').textContent = totalDaily.toFixed(2) + ' ك.و.س';
                document.getElementById('monthlyConsumption').textContent = (totalDaily * 30).toFixed(2) + ' ك.و.س';
                document.getElementById('yearlyConsumption').textContent = (totalDaily * 365).toFixed(2) + ' ك.و.س';
                
                document.getElementById('dailyConsumptionInput').value = totalDaily.toFixed(2);
                document.getElementById('hourlyConsumptionBattery').value = totalHourly.toFixed(0);
                
                // Update consumption summary
                updateConsumptionCost();
            }
            
            function updateConsumptionCost() {
                const dailyConsumption = parseFloat(document.getElementById('dailyConsumption').textContent) || 0;
                const kwhCost = parseFloat(document.getElementById('kwhCost').value) || 80;
                
                const monthlyConsumption = (dailyConsumption * 30).toFixed(2);
                const yearlyConsumption = (dailyConsumption * 365).toFixed(2);
                
                const dailyCost = (dailyConsumption * kwhCost).toFixed(2);
                const monthlyCost = (monthlyConsumption * kwhCost).toFixed(2);
                const yearlyCost = (yearlyConsumption * kwhCost).toFixed(2);
                
                document.getElementById('dailyConsumptionSummary').textContent = dailyConsumption;
                document.getElementById('monthlyConsumptionSummary').textContent = monthlyConsumption;
                document.getElementById('yearlyConsumptionSummary').textContent = yearlyConsumption;
                
                document.getElementById('dailyCost').textContent = dailyCost;
                document.getElementById('monthlyCost').textContent = monthlyCost;
                document.getElementById('yearlyCost').textContent = yearlyCost;
                
                // Calculate savings (same as yearly cost for now)
                document.getElementById('yearlySavings').textContent = yearlyCost;
            }
            
            // Panel calculation
            document.getElementById('calculatePanels').addEventListener('click', function() {
                const dailyConsumption = parseFloat(document.getElementById('dailyConsumptionInput').value) || 0;
                const sunHours = parseFloat(document.getElementById('sunHours').value) || 6;
                const panelPower = parseFloat(document.getElementById('panelPower').value) || 400;
                const panelPrice = parseFloat(document.getElementById('panelPrice').value) || 400;
                const efficiency = parseFloat(document.getElementById('panelEfficiency').value) || 20;
                
                if(dailyConsumption <= 0 || sunHours <= 0 || panelPower <= 0) {
                    showNotification('الرجاء إدخال قيم صحيحة أكبر من الصفر', true);
                    return;
                }
                
                const safetyFactor = 1.45;
                const requiredPower = (dailyConsumption / sunHours / (efficiency/100) * safetyFactor).toFixed(2);
                const requiredPanels = Math.ceil((requiredPower * 1000) / panelPower);
                const panelAreaPerUnit = (panelPower / (1000 * (efficiency/100))) * 1.2;
                const panelArea = (requiredPanels * panelAreaPerUnit).toFixed(1);
                const panelCost = (requiredPanels * panelPrice).toLocaleString();
                
                document.getElementById('requiredPower').textContent = requiredPower + ' ك.و';
                document.getElementById('requiredPanels').textContent = requiredPanels;
                document.getElementById('panelArea').textContent = panelArea + ' م²';
                document.getElementById('panelCost').textContent = panelCost + ' ريال';
                
                updateSystemSummary();
                showNotification('تم حساب الألواح الشمسية بنجاح');
            });
            
            // Battery calculation
            document.getElementById('calculateBatteries').addEventListener('click', function() {
                const operatingHours = parseFloat(document.getElementById('operatingHours').value) || 0;
                const hourlyConsumption = parseFloat(document.getElementById('hourlyConsumptionBattery').value) || 0;
                const dischargeRate = parseFloat(document.getElementById('dischargeRate').value) || 50;
                const batteryVoltage = parseFloat(document.getElementById('batteryVoltage').value) || 48;
                const batteryCapacity = parseFloat(document.getElementById('batteryCapacity').value) || 200;
                const batteryPrice = parseFloat(document.getElementById('batteryPrice').value) || 1500;
                
                if(operatingHours <= 0 || hourlyConsumption <= 0 || dischargeRate <= 0 || batteryCapacity <= 0) {
                    showNotification('الرجاء إدخال قيم صحيحة أكبر من الصفر', true);
                    return;
                }
                
                const dischargeFactor = dischargeRate / 100;
                const requiredCapacity = (hourlyConsumption * operatingHours) / (batteryVoltage * dischargeFactor);
                const requiredBatteries = Math.ceil(requiredCapacity / batteryCapacity);
                const batteryCost = (requiredBatteries * batteryPrice).toLocaleString();
                
                document.getElementById('requiredCapacity').textContent = Math.ceil(requiredCapacity) + ' أمبير.ساعة';
                document.getElementById('requiredBatteries').textContent = requiredBatteries;
                document.getElementById('batteryCost').textContent = batteryCost + ' ريال';
                
                updateSystemSummary();
                showNotification('تم حساب البطاريات بنجاح');
            });
            
            // Inverter calculation
            document.getElementById('calculateInverter').addEventListener('click', function() {
                const totalPower = parseFloat(document.getElementById('totalPower').value) || 0;
                const maxAppliancePower = parseFloat(document.getElementById('maxAppliancePower').value) || 0;
                const inverterPrice = parseFloat(document.getElementById('inverterPrice').value) || 2500;
                
                if(totalPower <= 0 || maxAppliancePower <= 0) {
                    showNotification('الرجاء إدخال قيم صحيحة أكبر من الصفر', true);
                    return;
                }
                
                const safetyFactor = 1.25;
                const inverterSize = Math.max(totalPower, maxAppliancePower) * safetyFactor;
                const inverterCost = inverterPrice.toLocaleString();
                
                document.getElementById('inverterSize').textContent = Math.ceil(inverterSize) + ' واط';
                document.getElementById('inverterCost').textContent = inverterCost + ' ريال';
                
                updateSystemSummary();
                showNotification('تم حساب العاكس بنجاح');
            });
            
            // Wire calculation
            document.getElementById('calculateWire').addEventListener('click', function() {
                const current = parseFloat(document.getElementById('current').value) || 0;
                const distance = parseFloat(document.getElementById('distance').value) || 0;
                const voltage = parseFloat(document.getElementById('voltage').value) || 48;
                const voltageDropPercent = parseFloat(document.getElementById('voltageDrop').value) || 3;
                const wireType = document.getElementById('wireType').value;
                const wirePrice = parseFloat(document.getElementById('wirePrice').value) || 50;
                
                if(current <= 0 || distance <= 0 || voltage <= 0) {
                    showNotification('الرجاء إدخال قيم صحيحة أكبر من الصفر', true);
                    return;
                }
                
                const maxVoltageDrop = (voltage * voltageDropPercent) / 100;
                const maxResistance = maxVoltageDrop / (current * 2);
                const resistivity = wireType === 'copper' ? 0.0172 : 0.0282;
                const requiredArea = (resistivity * distance * 2) / maxResistance;
                
                const standardSizes = [1.5, 2.5, 4, 6, 10, 16, 25, 35, 50];
                let wireSize = 1.5;
                for (const size of standardSizes) {
                    if (size >= requiredArea) {
                        wireSize = size;
                        break;
                    }
                }
                
                if (requiredArea > standardSizes[standardSizes.length - 1]) {
                    wireSize = Math.ceil(requiredArea);
                }
                
                const wireCost = (distance * wirePrice * wireSize).toLocaleString();
                
                document.getElementById('wireSize').textContent = wireSize + ' مم²';
                document.getElementById('wireCost').textContent = wireCost + ' ريال';
                
                updateSystemSummary();
                showNotification('تم حساب السلك الكهربائي بنجاح');
            });
            
            // Update system summary
            function updateSystemSummary() {
                try {
                    const panels = document.getElementById('requiredPanels').textContent || '0';
                    const batteries = document.getElementById('requiredBatteries').textContent || '0';
                    const inverter = document.getElementById('inverterSize').textContent || '0 واط';
                    const area = document.getElementById('panelArea').textContent || '0 م²';
                    
                    const panelCost = parseFloat(document.getElementById('panelCost').textContent.replace(/[^0-9.]/g, '')) || 0;
                    const batteryCost = parseFloat(document.getElementById('batteryCost').textContent.replace(/[^0-9.]/g, '')) || 0;
                    const inverterCost = parseFloat(document.getElementById('inverterCost').textContent.replace(/[^0-9.]/g, '')) || 0;
                    const wireCost = parseFloat(document.getElementById('wireCost').textContent.replace(/[^0-9.]/g, '')) || 0;
                    
                    const totalCost = panelCost + batteryCost + inverterCost + wireCost;
                    
                    document.getElementById('sPanels').textContent = panels;
                    document.getElementById('sBatteries').textContent = batteries;
                    document.getElementById('sInverter').textContent = inverter;
                    document.getElementById('sArea').textContent = area;
                    document.getElementById('sPanelCost').textContent = panelCost.toLocaleString() + ' ريال';
                    document.getElementById('sBatteryCost').textContent = batteryCost.toLocaleString() + ' ريال';
                    document.getElementById('sInverterCost').textContent = inverterCost.toLocaleString() + ' ريال';
                    document.getElementById('sWireCost').textContent = wireCost.toLocaleString() + ' ريال';
                    document.getElementById('sTotalCost').textContent = totalCost.toLocaleString() + ' ريال';
                    
                    // Update consumption cost in summary
                    updateConsumptionCost();
                    
                } catch (error) {
                    console.error('Error updating system summary:', error);
                }
            }
            
            // Print summary
            document.getElementById('printSummary').addEventListener('click', function() {
                window.print();
            });
            
            // Initialize page
            updateSystemSummary();
        });
    </script>
</body>
</html>
